{%load i18n %}
{% load static %}

<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1" />
  <title>{% block head_title %}{% endblock head_title %}</title>
  {% block extra_head %}
  {% endblock extra_head %}
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
	

  
  <script type="text/javascript">
      var user = '{{request.user}}'

      function getToken(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = cookies[i].trim();
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    
    var csrftoken = getToken('csrftoken');

    function getCookie(name){
      //split cookie string and get all individual name/vaule pairs in an array

      var cookieArr = document.cookie.split(";");

      //loop through the array elements

      for(var i = 0; i < cookieArr.length; i++){
        var cookiePair = cookieArr[i].split("=");

        /*Removing whitespace at the beginning of the cookie name */
        if(name == cookiePair[0].trim()){
          //decode the cookie value and return
          return decodeURIComponent(cookiePair[1]);
        }
      }
      //return null if not found
      return null;
    }

    var cart = JSON.parse(getCookie('cart'))

    if(cart == undefined){
      cart = {}
      console.log('Cart was created!', cart)
      document.cookie = 'cart=' + JSON.stringify(cart) + ";domain=;path=/"
    }


    console.log('Cart:', cart)


  </script>
</head>
<body>
  {% block body %}
        <div class='float-center mt-2'>
          <ul class="nav nav-underline">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="{% url 'fruits:store' %}">CHI-CHI BEKEE</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'fruits:store' %}">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'fruits:categories' %}">Categories</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'fruits:store' %}">Menu</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'fruits:store' %}">Settings</a>
            </li>
            
            <div class="float-end">
            <li class="nav-item">
              <a class="nav-link" href="{% url 'fruits:cart' %}"> <i class="bi bi-cart4">
              <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" style="color:green;" fill="currentColor" class="bi bi-cart4" viewBox="0 0 16 16">
                <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5zM3.14 5l.5 2H5V5H3.14zM6 5v2h2V5H6zm3 0v2h2V5H9zm3 0v2h1.36l.5-2H12zm1.11 3H12v2h.61l.5-2zM11 8H9v2h2V8zM8 8H6v2h2V8zM5 8H3.89l.5 2H5V8zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0z"/>
                <span class="position-absolute translate-middle badge rounded-pill bg-danger" style='margin-top:5px margin-right:10px;'>
                  {{cartItems}}
                 <span class="visually-hidden">unread messages</span>
               </span>
              
              </svg>
              
            </i></a>
          </div>
          
          <li class="nav-item float-end">
            <a class="nav-link" href="{% url 'account_logout' %}">Log out</a>
          </li>
          </li>
           
            
            
          </ul>
          </div>
    <hr>

     <div class="container">
            <br>
            {% block content %}
                


             {% endblock content %}
     </div>

     {% endblock body %}
     {% block extra_body %}
     {% endblock extra_body %}
     
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
  
  <script type="text/javascript" src="{% static 'js/awus.js' %}"></script>


</body>
</html>